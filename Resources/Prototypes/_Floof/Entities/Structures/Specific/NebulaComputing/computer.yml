- type: entity
  id: ComputerProgrammableBase
  parent: BaseStructure
  name: programmable computer
  description: A peak of technology.
  abstract: true
  components:
  # Visual
  - type: Sprite
    sprite: _Floof/Objects/Structures/NebulaComputing/computer.rsi
    layers:
    - state: base
    - state: working
      shader: unshaded
      map: [ working ]
    - state: printing
      shader: unshaded
      map: [ printing ]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.PowerDeviceVisuals.Powered:
        working:
          True: { visible: true }
          False: { visible: false }
      enum.ProgrammableComputerVisuals.IsPrinting:
        printing:
          True: { visible: true }
          False: { visible: false }
  - type: InteractionOutline
  # Powered
  - type: ExtensionCableReceiver
  - type: ApcPowerReceiver
    powerLoad: 5000 # running assembly is power-consuming, you know?
  - type: LitOnPowered
  - type: PointLight
    radius: 1.5
    energy: 1.6
    color: green
    castShadows: false
  # Slots
  - type: ItemSlots
    slots:
      cpu:
        name: computer-slot-name-cpu
        startingItem: ComputerCPUBasic
        swap: false
        whitelist:
          tags: [ComputerCPU]
      memory:
        name: computer-slot-name-memory
        startingItem: ComputerMemoryBasic
        swap: false
        whitelist:
          tags: [ComputerRAM]
      storage:
        name: computer-slot-name-storage
        startingItem: ComputerHardDiskBasic
        swap: false
        whitelist:
          tags: [ComputerStorage]
  - type: ContainerContainer
    containers:
      cpu: !type:ContainerSlot
      memory: !type:ContainerSlot
      storage: !type:ContainerSlot
  # UI
  # TODO reset RAM/PC on power loss
  - type: ActivatableUI
    key: enum.ProgrammableComputerUiKey.Key
  - type: ActivatableUIRequiresPower
  - type: UserInterface
    interfaces:
      enum.ProgrammableComputerUiKey.Key:
        type: ProgrammableComputerBUI
  - type: Clickable
  # Device links
  - type: DeviceNetwork
    deviceNetId: Wireless
    receiveFrequencyId: BasicDevice
  - type: WirelessNetworkConnection
    range: 25
  - type: DeviceLinkSource
    ports:
    - CustomPort1
    - CustomPort2
    - CustomPort3
    - CustomPort4
  - type: DeviceLinkSink
    ports:
    - CustomPort1
    - CustomPort2
    - CustomPort3
    - CustomPort4
  - type: WiresPanel


- type: entity
  id: ComputerProgrammable
  parent: [ ComputerProgrammableBase ]
  name: programmable computer
  description: A peak of technology.
  components:
  - type: ProgrammableComputerHost
  - type: Construction
    graph: ComputerProgrammable
    node: computer



